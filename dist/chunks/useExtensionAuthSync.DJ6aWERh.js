const t={AUTH_TOKEN_SYNC:"TTS_AUDIFY_AUTH_SYNC",AUTH_TOKEN_CLEAR:"TTS_AUDIFY_AUTH_CLEAR",REQUEST_AUTH_TOKEN:"TTS_AUDIFY_REQUEST_AUTH",AUTH_SYNC_ACK:"TTS_AUDIFY_AUTH_ACK"},o="tts-audify-extension";function _(){const n=async i=>{if(i.origin!==window.location.origin)return;const e=i.data;e?.extensionId===o&&(e.type===t.AUTH_TOKEN_SYNC&&e.authToken&&(localStorage.setItem("auth_token",e.authToken),e.refreshToken&&localStorage.setItem("refresh_token",e.refreshToken),window.postMessage({type:t.AUTH_SYNC_ACK,extensionId:o,timestamp:Date.now()},window.location.origin)),e.type===t.AUTH_TOKEN_CLEAR&&(localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token")))};return window.addEventListener("message",n),window.postMessage({type:t.REQUEST_AUTH_TOKEN,extensionId:o},window.location.origin),()=>{window.removeEventListener("message",n)}}export{_ as i};
